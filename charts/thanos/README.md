# Thanos

[Thanos](https://thanos.io/) is an open source, highly available _Prometheus_ setup with long term storage capabilities.

## Installing the Chart

Before you can install the chart you will need to add the `stevehipwell` repo to [Helm](https://helm.sh/).

```shell
helm repo add stevehipwell https://stevehipwell.github.io/helm-charts/
```

After you've installed the repo you can install the chart.

```shell
helm upgrade --install --namespace default --values ./my-values.yaml my-release stevehipwell/thanos
```

## Configuration

The following table lists the configurable parameters of the _Thanos_ chart and their default values.

| Parameter                                                      | Description                                                                                                                                                                                  | Default                                    |
| -------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------ |
| `image.repository`                                             | Image repository.                                                                                                                                                                            | `quay.io/thanos/thanos`                    |
| `image.tag`                                                    | Image tag; this will default to `.Chart.AppVersion` if not set (tag can be completely omitted by setting it to `-`)    .                                                                     |                                            |
| `image.digest`                                                 | Image digest.                                                                                                                                                                                |                                            |
| `image.pullPolicy`                                             | Image pull policy.                                                                                                                                                                           | `IfNotPresent`                             |
| `imagePullSecrets`                                             | Image pull secrets.                                                                                                                                                                          | `[]`                                       |
| `nameOverride`                                                 | Override the `name` of the chart.                                                                                                                                                            | `""`                                       |
| `fullnameOverride`                                             | Override the `fullname` of the chart.                                                                                                                                                        | `""`                                       |
| `commonLabels`                                                 | Labels to add to all chart resources.                                                                                                                                                        | `{}`                                       |
| `serviceMonitor.enabled`                                       | If `true`, create a _Prometheus_ service monitor for all components.                                                                                                                         | `false`                                    |
| `serviceMonitor.additionalLabels`                              | Additional labels to be set on the ServiceMonitor.                                                                                                                                           | `{}`                                       |
| `serviceMonitor.endpointConfig`                                | Additional endpoint configuration for the ServiceMonitor.                                                                                                                                    | `{}`                                       |
| `serviceMonitor.interval`                                      | **DEPRECATED** _Prometheus_ scrape frequency, use `serviceMonitor.endpointConfig.interval` instead.                                                                                          | `""`                                       |
| `objstoreConfig.create`                                        | If `true`, create a secret containing the content of `objstoreConfig.value`.                                                                                                                 | `true`                                     |
| `objstoreConfig.name`                                          | Name of an existing secret to use for the objstore configuration, this will also override the default secret name if set with `objstoreConfig.create: true`.                                 | `""`                                       |
| `objstoreConfig.key`                                           | Secret key to use for the objstore configuration.                                                                                                                                            | `config`                                   |
| `objstoreConfig.value`                                         | Default objstore configuration, either a string or a map. The default values are not suitable for production.                                                                                | _see values.yaml_                          |
| `logLevel`                                                     | Log level for all components.                                                                                                                                                                | `info`                                     |
| `logFormat`                                                    | Log format for all components.                                                                                                                                                               | `logfmt`                                   |
| `additionalEndpoints`                                          | Additional endpoints to configure with (`--endpoint`).                                                                                                                                       | `""`                                       |
| `additionalReplicaLabels`                                      | Labels external to this chart added to metrics to show the replica recording the data.                                                                                                       | `[]`                                       |
| `compact.enabled`                                              | If `true`, create resources for the compact component.                                                                                                                                       | `false`                                    |
| `compact.serviceAccount.create`                                | If `true`, create a new service account for the compact pod.                                                                                                                                 | `true`                                     |
| `compact.serviceAccount.labels`                                | Labels to add to the compact service account.                                                                                                                                                | `{}`                                       |
| `compact.serviceAccount.annotations`                           | Annotations to add to the compact service account.                                                                                                                                           | `{}`                                       |
| `compact.serviceAccount.name`                                  | Service account to be used for compact. If not set and `compact.serviceAccount.create` is `true`, a name is generated using the full name template.                                          | `""`                                       |
| `compact.serviceAccount.automountToken`                        | If `true`, mount the compact ServiceAccount token.                                                                                                                                           | `false`                                    |
| `compact.service.annotations`                                  | Annotations to add to the compact service.                                                                                                                                                   | `{}`                                       |
| `compact.updateStrategy`                                       | Update strategy for the compact pod.                                                                                                                                                         | `{}`                                       |
| `compact.podLabels`                                            | Labels to add to the compact pod.                                                                                                                                                            | `{}`                                       |
| `compact.podAnnotations`                                       | Annotations to add to the compact pod.                                                                                                                                                       | `{}`                                       |
| `compact.podSecurityContext`                                   | Security context for the compact pod.                                                                                                                                                        | `{fsGroup: 65534, runAsUser: 65534}`       |
| `compact.securityContext`                                      | Security context for the _thanos-compact_ container in the compact pod.                                                                                                                      | `{}`                                       |
| `compact.priorityClassName`                                    | Priority class name to use for the compact pod.                                                                                                                                              | `""`                                       |
| `compact.terminationGracePeriodSeconds`                        | Termination grace period for the compact pod.                                                                                                                                                | `null`                                     |
| `compact.extraEnv`                                             | Extra environment variables for the _thanos-compact_ container in the compact pod.                                                                                                           | `[]`                                       |
| `compact.replicaDeduplication`                                 | If `true`, use the `penalty` deduplication function optimised for HA Prometheus replicas.                                                                                                    | `false`                                    |
| `compact.extraArgs`                                            | Extra arguments for the _thanos-compact_ container in the compact pod.                                                                                                                       | `[]`                                       |
| `compact.livenessProbe`                                        | Liveness probe for the compact pod.                                                                                                                                                          | See _values.yaml_                          |
| `compact.readinessProbe`                                       | Readiness probe for the compact pod.                                                                                                                                                         | See _values.yaml_                          |
| `compact.resources`                                            | Resource requests and limits for the _thanos-compact_ container in the compact pod.                                                                                                          | `{}`                                       |
| `compact.persistence.enabled`                                  | If `true`, create a PVC for the compact pod.                                                                                                                                                 | `false`                                    |
| `compact.persistence.existingClaim`                            | Use an existing PVC to persist data for the compact pod.                                                                                                                                     | `""`                                       |
| `compact.persistence.annotations`                              | Annotations to add to the compact PVC.                                                                                                                                                       | `{}`                                       |
| `compact.persistence.accessMode`                               | Persistence access mode for the compact PVC.                                                                                                                                                 | `ReadWriteOnce`                            |
| `compact.persistence.storageClass`                             | Storage class for the compact PVC.                                                                                                                                                           | `standard` _(use `-` for cluster default)_ |
| `compact.persistence.size`                                     | Size of the compact PVC.                                                                                                                                                                     | `8Gi`                                      |
| `compact.nodeSelector`                                         | Node labels for compact pod assignment.                                                                                                                                                      | `{}`                                       |
| `compact.affinity`                                             | Affinity settings for compact pod assignment. If an explicit label selector is not provided for pod affinity or pod anti-affinity one will be created from the pod selector labels.          | `{}`                                       |
| `compact.topologySpreadConstraints`                            | Topology spread constraints for compact pod assignment. If an explicit label selector is not provided one will be created from the pod selector labels.                                      | `[]`                                       |
| `compact.tolerations`                                          | Toleration labels for compact pod assignment.                                                                                                                                                | `[]`                                       |
| `query.serviceAccount.create`                                  | If `true`, create a new service account for the query pod.                                                                                                                                   | `true`                                     |
| `query.serviceAccount.labels`                                  | Labels to add to the query service account.                                                                                                                                                  | `{}`                                       |
| `query.serviceAccount.annotations`                             | Annotations to add to the query service account.                                                                                                                                             | `{}`                                       |
| `query.serviceAccount.name`                                    | Service account to be used for query. If not set and `query.serviceAccount.create` is `true`, a name is generated using the full name template.                                              | `""`                                       |
| `query.serviceAccount.automountToken`                          | If `true`, mount the query ServiceAccount token.                                                                                                                                             | `false`                                    |
| `query.service.annotations`                                    | Annotations to add to the query service.                                                                                                                                                     | `{}`                                       |
| `query.replicas`                                               | The number of replicas of the query pod.                                                                                                                                                     | `1`                                        |
| `query.updateStrategy`                                         | Update strategy for the query pod.                                                                                                                                                           | `{}`                                       |
| `query.autoscaling.enabled`                                    | If `true`, create a HPA for the query deployment.                                                                                                                                            | `false`                                    |
| `query.autoscaling.minReplicas`                                | Minimum number of query pod replicas.                                                                                                                                                        | `1`                                        |
| `query.autoscaling.maxReplicas`                                | Maximum number of query pod replicas.                                                                                                                                                        | `3`                                        |
| `query.autoscaling.targetCPUUtilizationPercentage`             | Target CPU utilisation for the query pod.                                                                                                                                                    | `80`                                       |
| `query.autoscaling.targetMemoryUtilizationPercentage`          | Target memory utilisation for the query pod.                                                                                                                                                 | `null`                                     |
| `query.podDisruptionBudget.enabled`                            | If `true`, create a PDB for the query deployment.                                                                                                                                            | `{}`                                       |
| `query.podDisruptionBudget.minAvailable`                       | Set the query PDB minimum available pods.                                                                                                                                                    | `null`                                     |
| `query.podDisruptionBudget.maxUnavailable`                     | Set the query PDB maximum unavailable pods.                                                                                                                                                  | `null`                                     |
| `query.podLabels`                                              | Labels to add to the query pod.                                                                                                                                                              | `{}`                                       |
| `query.podAnnotations`                                         | Annotations to add to the query pod.                                                                                                                                                         | `{}`                                       |
| `query.podSecurityContext`                                     | Security context for the query pod.                                                                                                                                                          | `{fsGroup: 65534, runAsUser: 65534}`       |
| `query.securityContext`                                        | Security context for the _thanos-query_ container in the query pod.                                                                                                                          | `{}`                                       |
| `query.priorityClassName`                                      | Priority class name to use for the query pod.                                                                                                                                                | `""`                                       |
| `query.terminationGracePeriodSeconds`                          | Termination grace period for the query pod.                                                                                                                                                  | `null`                                     |
| `query.extraEnv`                                               | Extra environment variables for the _thanos-query_ container in the query pod.                                                                                                               | `[]`                                       |
| `query.replicaLabels`                                          | **DEPRECATED** - Labels added to metrics to show the replica recording the data (`--query.replica-label`), use `additionalReplicaLabels` instead.                                            | `[]`                                       |
| `query.additionalStores`                                       | **DEPRECATED** - Additional stores to configure query with (`--store`), use `additionalEndpoints` instead.                                                                                   | `""`                                       |
| `query.extraArgs`                                              | Extra arguments for the _thanos-query_ container in the query pod.                                                                                                                           | `[]`                                       |
| `query.livenessProbe`                                          | Liveness probe for the query pod.                                                                                                                                                            | See _values.yaml_                          |
| `query.readinessProbe`                                         | Readiness probe for the query pod.                                                                                                                                                           | See _values.yaml_                          |
| `query.ingress.enabled`                                        | If `true`, create an ingress object for the query service.                                                                                                                                   | `false`                                    |
| `query.ingress.annotations`                                    | Ingress annotations for the query service.                                                                                                                                                   | `{}`                                       |
| `query.ingress.ingressClassName`                               | Ingress class to use for the query service.                                                                                                                                                  | `""`                                       |
| `query.ingress.path`                                           | Ingress path for the query service.                                                                                                                                                          | `/`                                        |
| `query.ingress.hosts`                                          | Ingress hosts configuration for the query service.                                                                                                                                           | `[]`                                       |
| `query.ingress.tls`                                            | Ingress TLS configuration for the query service                                                                                                                                              | `[]`                                       |
| `query.resources`                                              | Resource requests and limits for the _thanos-query_ container in the query pod.                                                                                                              | `{}`                                       |
| `query.nodeSelector`                                           | Node labels for query pod assignment.                                                                                                                                                        | `{}`                                       |
| `query.affinity`                                               | Affinity settings for query pod assignment. If an explicit label selector is not provided for pod affinity or pod anti-affinity one will be created from the pod selector labels.            | `{}`                                       |
| `query.topologySpreadConstraints`                              | Topology spread constraints for query pod assignment. If an explicit label selector is not provided one will be created from the pod selector labels.                                        | `[]`                                       |
| `query.tolerations`                                            | Toleration labels for query pod assignment.                                                                                                                                                  | `[]`                                       |
| `queryFrontend.enabled`                                        | If `true`, create resources for the query frontend component.                                                                                                                                | `false`                                    |
| `queryFrontend.serviceAccount.create`                          | If `true`, create a new service account for the query frontend pod.                                                                                                                          | `true`                                     |
| `queryFrontend.serviceAccount.labels`                          | Labels to add to the query frontend service account.                                                                                                                                         | `{}`                                       |
| `queryFrontend.serviceAccount.annotations`                     | Annotations to add to the query frontend service account.                                                                                                                                    | `{}`                                       |
| `queryFrontend.serviceAccount.name`                            | Service account to be used for query frontend. If not set and `queryFrontend.serviceAccount.create` is `true`, a name is generated using the full name template.                             | `""`                                       |
| `queryFrontend.serviceAccount.automountToken`                  | If `true`, mount the query frontend ServiceAccount token.                                                                                                                                    | `false`                                    |
| `queryFrontend.service.annotations`                            | Annotations to add to the query frontend service.                                                                                                                                            | `{}`                                       |
| `queryFrontend.replicas`                                       | The number of replicas of the query frontend pod.                                                                                                                                            | `1`                                        |
| `queryFrontend.updateStrategy`                                 | Update strategy for the query frontend pod.                                                                                                                                                  | `{}`                                       |
| `queryFrontend.autoscaling.enabled`                            | If `true`, create a HPA for the query frontend deployment.                                                                                                                                   | `false`                                    |
| `queryFrontend.autoscaling.minReplicas`                        | Minimum number of query frontend pod replicas.                                                                                                                                               | `1`                                        |
| `queryFrontend.autoscaling.maxReplicas`                        | Maximum number of query frontend pod replicas.                                                                                                                                               | `3`                                        |
| `queryFrontend.autoscaling.targetCPUUtilizationPercentage`     | Target CPU utilisation for the query frontend pod.                                                                                                                                           | `80`                                       |
| `queryFrontend.autoscaling.targetMemoryUtilizationPercentage`  | Target memory utilisation for the query frontend pod.                                                                                                                                        | `null`                                     |
| `queryFrontend.podDisruptionBudget.enabled`                    | If `true`, create a PDB for the query frontend deployment.                                                                                                                                   | `{}`                                       |
| `queryFrontend.podDisruptionBudget.minAvailable`               | Set the query frontend PDB minimum available pods.                                                                                                                                           | `null`                                     |
| `queryFrontend.podDisruptionBudget.maxUnavailable`             | Set the query frontend PDB maximum unavailable pods.                                                                                                                                         | `null`                                     |
| `queryFrontend.podLabels`                                      | Labels to add to the query frontend pod.                                                                                                                                                     | `{}`                                       |
| `queryFrontend.podAnnotations`                                 | Annotations to add to the query frontend pod.                                                                                                                                                | `{}`                                       |
| `queryFrontend.podSecurityContext`                             | Security context for the query frontend pod.                                                                                                                                                 | `{fsGroup: 65534, runAsUser: 65534}`       |
| `queryFrontend.securityContext`                                | Security context for the _thanos-query-frontend_ container in the query frontend pod.                                                                                                        | `{}`                                       |
| `queryFrontend.priorityClassName`                              | Priority class name to use for the query frontend pod.                                                                                                                                       | `""`                                       |
| `queryFrontend.terminationGracePeriodSeconds`                  | Termination grace period for the query frontend pod.                                                                                                                                         | `null`                                     |
| `queryFrontend.extraEnv`                                       | Extra environment variables for the _thanos-query-frontend_ container in the query frontend pod.                                                                                             | `[]`                                       |
| `queryFrontend.extraArgs`                                      | Extra arguments for the _thanos-query-frontend_ container in the query frontend pod.                                                                                                         | `[]`                                       |
| `queryFrontend.livenessProbe`                                  | Liveness probe for the query frontend pod.                                                                                                                                                   | See _values.yaml_                          |
| `queryFrontend.readinessProbe`                                 | Readiness probe for the query frontend pod.                                                                                                                                                  | See _values.yaml_                          |
| `queryFrontend.ingress.enabled`                                | If `true`, create an ingress object for the query frontend service.                                                                                                                          | `false`                                    |
| `queryFrontend.ingress.annotations`                            | Ingress annotations for the query frontend service.                                                                                                                                          | `{}`                                       |
| `queryFrontend.ingress.ingressClassName`                       | Ingress class to use for the query frontend service.                                                                                                                                         | `""`                                       |
| `queryFrontend.ingress.path`                                   | Ingress path for the query frontend service.                                                                                                                                                 | `/`                                        |
| `queryFrontend.ingress.hosts`                                  | Ingress hosts configuration for the query frontend service.                                                                                                                                  | `[]`                                       |
| `queryFrontend.ingress.tls`                                    | Ingress TLS configuration for the query frontend service                                                                                                                                     | `[]`                                       |
| `queryFrontend.resources`                                      | Resource requests and limits for the _thanos-query-frontend_ container in the query frontend pod.                                                                                            | `{}`                                       |
| `queryFrontend.nodeSelector`                                   | Node labels for query frontend pod assignment.                                                                                                                                               | `{}`                                       |
| `queryFrontend.affinity`                                       | Affinity settings for query frontend pod assignment. If an explicit label selector is not provided for pod affinity or pod anti-affinity one will be created from the pod selector labels.   | `{}`                                       |
| `queryFrontend.topologySpreadConstraints`                      | Topology spread constraints for query frontend pod assignment. If an explicit label selector is not provided one will be created from the pod selector labels.                               | `[]`                                       |
| `queryFrontend.tolerations`                                    | Toleration labels for query frontend pod assignment.                                                                                                                                         | `[]`                                       |
| `receive.enabled`                                              | If `true`, create resources for the receive component.                                                                                                                                       | `true`                                     |
| `receive.replicationFactor`                                    | Replication factor for the receive component.                                                                                                                                                | `1`                                        |
| `receive.retention`                                            | Retention for the receive component.                                                                                                                                                         | `48h`                                      |
| `receive.ingestor.serviceAccount.create`                       | If `true`, create a new service account for the receive ingestor pod.                                                                                                                        | `true`                                     |
| `receive.ingestor.serviceAccount.labels`                       | Labels to add to the receive ingestor service account.                                                                                                                                       | `{}`                                       |
| `receive.ingestor.serviceAccount.annotations`                  | Annotations to add to the receive ingestor service account.                                                                                                                                  | `{}`                                       |
| `receive.ingestor.serviceAccount.name`                         | Service account to be used for receive ingestor pod. If not set and `receive.ingestor.serviceAccount.create` is `true`, a name is generated using the full name template.                    | `""`                                       |
| `receive.ingestor.serviceAccount.automountToken`               | If `true`, mount the receive ingestor ServiceAccount token.                                                                                                                                  | `false`                                    |
| `receive.ingestor.service.annotations`                         | Annotations to add to the receive ingestor service.                                                                                                                                          | `{}`                                       |
| `receive.ingestor.replicas`                                    | The number of replicas of the receive ingestor pod.                                                                                                                                          | `1`                                        |
| `receive.ingestor.updateStrategy`                              | Update strategy for the receive ingestor pod.                                                                                                                                                | `{}`                                       |
| `receive.ingestor.podDisruptionBudget.enabled`                 | If `true`, create a PDB for the receive ingestor deployment.                                                                                                                                 | `{}`                                       |
| `receive.ingestor.podDisruptionBudget.minAvailable`            | Set the receive ingestor PDB minimum available pods.                                                                                                                                         | `null`                                     |
| `receive.ingestor.podDisruptionBudget.maxUnavailable`          | Set the receive ingestor PDB maximum unavailable pods.                                                                                                                                       | `null`                                     |
| `receive.ingestor.podLabels`                                   | Labels to add to the receive ingestor pod.                                                                                                                                                   | `{}`                                       |
| `receive.ingestor.podAnnotations`                              | Annotations to add to the receive ingestor pod.                                                                                                                                              | `{}`                                       |
| `receive.ingestor.podSecurityContext`                          | Security context for the receive ingestor pod.                                                                                                                                               | `{fsGroup: 65534, runAsUser: 65534}`       |
| `receive.ingestor.securityContext`                             | Security context for the _thanos-receive-ingestor_ container in the receive ingestor pod.                                                                                                    | `{}`                                       |
| `receive.ingestor.priorityClassName`                           | Priority class name to use for the receive ingestor pod.                                                                                                                                     | `""`                                       |
| `receive.ingestor.terminationGracePeriodSeconds`               | Termination grace period for the receive ingestor pod.                                                                                                                                       | `null`                                     |
| `receive.ingestor.extraEnv`                                    | Extra environment variables for the _thanos-receive-ingestor_ container in the receive ingestor pod.                                                                                         | `[]`                                       |
| `receive.ingestor.extraArgs`                                   | Extra arguments for the _thanos-receive-ingestor_ container in the receive ingestor pod.                                                                                                     | `[]`                                       |
| `receive.ingestor.livenessProbe`                               | Liveness probe for the receive ingestor pod.                                                                                                                                                 | See _values.yaml_                          |
| `receive.ingestor.readinessProbe`                              | Readiness probe for the receive ingestor pod.                                                                                                                                                | See _values.yaml_                          |
| `receive.ingestor.resources`                                   | Resource requests and limits for the _thanos-receive-ingestor_ container in the receive ingestor pod.                                                                                        | `{}`                                       |
| `receive.ingestor.persistence.enabled`                         | If `true`, create a PVC for the receive ingestor pod.                                                                                                                                        | `false`                                    |
| `receive.ingestor.persistence.existingClaim`                   | Use an existing PVC to persist data for the receive ingestor pod.                                                                                                                            | `""`                                       |
| `receive.ingestor.persistence.annotations`                     | Annotations to add to the receive ingestor PVC.                                                                                                                                              | `{}`                                       |
| `receive.ingestor.persistence.accessMode`                      | Persistence access mode for the receive ingestor PVC.                                                                                                                                        | `ReadWriteOnce`                            |
| `receive.ingestor.persistence.storageClass`                    | Storage class for the receive ingestor PVC.                                                                                                                                                  | `standard` _(use `-` for cluster default)_ |
| `receive.ingestor.persistence.size`                            | Size of the receive ingestor PVC.                                                                                                                                                            | `8Gi`                                      |
| `receive.ingestor.nodeSelector`                                | Node labels for receive ingestor pod assignment.                                                                                                                                             | `{}`                                       |
| `receive.ingestor.affinity`                                    | Affinity settings for receive ingestor pod assignment. If an explicit label selector is not provided for pod affinity or pod anti-affinity one will be created from the pod selector labels. | `{}`                                       |
| `receive.ingestor.topologySpreadConstraints`                   | Topology spread constraints for receive ingestor pod assignment. If an explicit label selector is not provided one will be created from the pod selector labels.                             | `[]`                                       |
| `receive.ingestor.tolerations`                                 | Toleration labels for receive ingestor pod assignment.                                                                                                                                       | `[]`                                       |
| `receive.router.serviceAccount.create`                         | If `true`, create a new service account for the receive router pod.                                                                                                                          | `true`                                     |
| `receive.router.serviceAccount.labels`                         | Labels to add to the receive router service account.                                                                                                                                         | `{}`                                       |
| `receive.router.serviceAccount.annotations`                    | Annotations to add to the receive router service account.                                                                                                                                    | `{}`                                       |
| `receive.router.serviceAccount.name`                           | Service account to be used for receive router. If not set and `receive.router.serviceAccount.create` is `true`, a name is generated using the full name template.                            | `""`                                       |
| `receive.router.serviceAccount.automountToken`                 | If `true`, mount the receive router ServiceAccount token.                                                                                                                                    | `false`                                    |
| `receive.router.service.annotations`                           | Annotations to add to the receive router service.                                                                                                                                            | `{}`                                       |
| `receive.router.replicas`                                      | The number of replicas of the receive router pod.                                                                                                                                            | `1`                                        |
| `receive.router.updateStrategy`                                | Update strategy for the receive router pod.                                                                                                                                                  | `{}`                                       |
| `receive.router.autoscaling.enabled`                           | If `true`, create a HPA for the receive router deployment.                                                                                                                                   | `false`                                    |
| `receive.router.autoscaling.minReplicas`                       | Minimum number of receive router pod replicas.                                                                                                                                               | `1`                                        |
| `receive.router.autoscaling.maxReplicas`                       | Maximum number of receive router pod replicas.                                                                                                                                               | `3`                                        |
| `receive.router.autoscaling.targetCPUUtilizationPercentage`    | Target CPU utilisation for the receive router pod.                                                                                                                                           | `80`                                       |
| `receive.router.autoscaling.targetMemoryUtilizationPercentage` | Target memory utilisation for the receive router pod.                                                                                                                                        | `null`                                     |
| `receive.router.podDisruptionBudget.enabled`                   | If `true`, create a PDB for the receive router deployment.                                                                                                                                   | `{}`                                       |
| `receive.router.podDisruptionBudget.minAvailable`              | Set the receive router PDB minimum available pods.                                                                                                                                           | `null`                                     |
| `receive.router.podDisruptionBudget.maxUnavailable`            | Set the receive router PDB maximum unavailable pods.                                                                                                                                         | `null`                                     |
| `receive.router.podLabels`                                     | Labels to add to the receive router pod.                                                                                                                                                     | `{}`                                       |
| `receive.router.podAnnotations`                                | Annotations to add to the receive router pod.                                                                                                                                                | `{}`                                       |
| `receive.router.podSecurityContext`                            | Security context for the receive router pod.                                                                                                                                                 | `{fsGroup: 65534, runAsUser: 65534}`       |
| `receive.router.securityContext`                               | Security context for the _thanos-receive-router_ container in the receive router pod.                                                                                                        | `{}`                                       |
| `receive.router.priorityClassName`                             | Priority class name to use for the receive router pod.                                                                                                                                       | `""`                                       |
| `receive.router.terminationGracePeriodSeconds`                 | Termination grace period for the receive router pod.                                                                                                                                         | `null`                                     |
| `receive.router.extraEnv`                                      | Extra environment variables for the _thanos-receive-router_ container in the receive router pod.                                                                                             | `[]`                                       |
| `receive.router.extraArgs`                                     | Extra arguments for the _thanos-receive-router_ container in the receive router pod.                                                                                                         | `[]`                                       |
| `receive.router.livenessProbe`                                 | Liveness probe for the receive router pod.                                                                                                                                                   | See _values.yaml_                          |
| `receive.router.readinessProbe`                                | Readiness probe for the receive router pod.                                                                                                                                                  | See _values.yaml_                          |
| `receive.router.ingress.enabled`                               | If `true`, create an ingress object for the receive router service.                                                                                                                          | `false`                                    |
| `receive.router.ingress.annotations`                           | Ingress annotations for the receive router service.                                                                                                                                          | `{}`                                       |
| `receive.router.ingress.ingressClassName`                      | Ingress class to use for the receive router service.                                                                                                                                         | `""`                                       |
| `receive.router.ingress.path`                                  | Ingress path for the receive router service.                                                                                                                                                 | `/`                                        |
| `receive.router.ingress.hosts`                                 | Ingress hosts configuration for the receive router service.                                                                                                                                  | `[]`                                       |
| `receive.router.ingress.tls`                                   | Ingress TLS configuration for the receive router service                                                                                                                                     | `[]`                                       |
| `receive.router.resources`                                     | Resource requests and limits for the _thanos-receive-router_ container in the receive router pod.                                                                                            | `{}`                                       |
| `receive.router.nodeSelector`                                  | Node labels for receive router pod assignment.                                                                                                                                               | `{}`                                       |
| `receive.router.affinity`                                      | Affinity settings for receive router pod assignment. If an explicit label selector is not provided for pod affinity or pod anti-affinity one will be created from the pod selector labels.   | `{}`                                       |
| `receive.router.topologySpreadConstraints`                     | Topology spread constraints for receive router pod assignment. If an explicit label selector is not provided one will be created from the pod selector labels.                               | `[]`                                       |
| `receive.router.tolerations`                                   | Toleration labels for receive router pod assignment.                                                                                                                                         | `[]`                                       |
| `rule.enabled`                                                 | If `true`, create resources for the rule component.                                                                                                                                          | `true`                                     |
| `rule.serviceAccount.create`                                   | If `true`, create a new service account for the rule pod.                                                                                                                                    | `true`                                     |
| `rule.serviceAccount.labels`                                   | Labels to add to the rule service account.                                                                                                                                                   | `{}`                                       |
| `rule.serviceAccount.annotations`                              | Annotations to add to the rule service account.                                                                                                                                              | `{}`                                       |
| `rule.serviceAccount.name`                                     | Service account to be used for rule pod. If not set and `rule.serviceAccount.create` is `true`, a name is generated using the full name template.                                            | `""`                                       |
| `rule.serviceAccount.automountToken`                           | If `true`, mount the rule ServiceAccount token.                                                                                                                                              | `false`                                    |
| `rule.service.annotations`                                     | Annotations to add to the rule service.                                                                                                                                                      | `{}`                                       |
| `rule.replicas`                                                | The number of replicas of the rule pod.                                                                                                                                                      | `1`                                        |
| `rule.updateStrategy`                                          | Update strategy for the rule pod.                                                                                                                                                            | `{}`                                       |
| `rule.podDisruptionBudget.enabled`                             | If `true`, create a PDB for the rule deployment.                                                                                                                                             | `{}`                                       |
| `rule.podDisruptionBudget.minAvailable`                        | Set the rule PDB minimum available pods.                                                                                                                                                     | `null`                                     |
| `rule.podDisruptionBudget.maxUnavailable`                      | Set the rule PDB maximum unavailable pods.                                                                                                                                                   | `null`                                     |
| `rule.podLabels`                                               | Labels to add to the rule pod.                                                                                                                                                               | `{}`                                       |
| `rule.podAnnotations`                                          | Annotations to add to the rule pod.                                                                                                                                                          | `{}`                                       |
| `rule.podSecurityContext`                                      | Security context for the rule pod.                                                                                                                                                           | `{fsGroup: 65534, runAsUser: 65534}`       |
| `rule.securityContext`                                         | Security context for the _thanos-rule_ container in the rule pod.                                                                                                                            | `{}`                                       |
| `rule.priorityClassName`                                       | Priority class name to use for the rule pod.                                                                                                                                                 | `""`                                       |
| `rule.terminationGracePeriodSeconds`                           | Termination grace period for the rule pod.                                                                                                                                                   | `null`                                     |
| `rule.extraEnv`                                                | Extra environment variables for the _thanos-rule_ container in the rule pod.                                                                                                                 | `[]`                                       |
| `rule.retention`                                               | Block retention period on local disk (`--tsdb.retention`).                                                                                                                                   | `48h`                                      |
| `rule.blockDuration`                                           | Block duration for TSDB block (`--tsdb.block-duration`).                                                                                                                                     | `2h`                                       |
| `rule.evalInterval`                                            | Rule evaluation interval (`--eval-interval`).                                                                                                                                                | `1m`                                       |
| `rule.extraArgs`                                               | Extra arguments for the _thanos-rule_ container in the rule pod.                                                                                                                             | `[]`                                       |
| `rule.livenessProbe`                                           | Liveness probe for the rule pod.                                                                                                                                                             | See _values.yaml_                          |
| `rule.readinessProbe`                                          | Readiness probe for the rule pod.                                                                                                                                                            | See _values.yaml_                          |
| `rule.ingress.enabled`                                         | If `true`, create an ingress object for the rule service.                                                                                                                                    | `false`                                    |
| `rule.ingress.annotations`                                     | Ingress annotations for the rule service.                                                                                                                                                    | `{}`                                       |
| `rule.ingress.ingressClassName`                                | Ingress class to use for the rule service.                                                                                                                                                   | `""`                                       |
| `rule.ingress.path`                                            | Ingress path for the rule service.                                                                                                                                                           | `/`                                        |
| `rule.ingress.hosts`                                           | Ingress hosts configuration for the rule service.                                                                                                                                            | `[]`                                       |
| `rule.ingress.tls`                                             | Ingress TLS configuration for the rule service                                                                                                                                               | `[]`                                       |
| `rule.resources`                                               | Resource requests and limits for the _thanos-rule_ container in the rule pod.                                                                                                                | `{}`                                       |
| `rule.persistence.enabled`                                     | If `true`, create a PVC for the rule pod.                                                                                                                                                    | `false`                                    |
| `rule.persistence.existingClaim`                               | Use an existing PVC to persist data for the rule pod.                                                                                                                                        | `""`                                       |
| `rule.persistence.annotations`                                 | Annotations to add to the rule PVC.                                                                                                                                                          | `{}`                                       |
| `rule.persistence.accessMode`                                  | Persistence access mode for the rule PVC.                                                                                                                                                    | `ReadWriteOnce`                            |
| `rule.persistence.storageClass`                                | Storage class for the rule PVC.                                                                                                                                                              | `standard` _(use `-` for cluster default)_ |
| `rule.persistence.size`                                        | Size of the rule PVC.                                                                                                                                                                        | `8Gi`                                      |
| `rule.nodeSelector`                                            | Node labels for rule pod assignment.                                                                                                                                                         | `{}`                                       |
| `rule.affinity`                                                | Affinity settings for rule pod assignment. If an explicit label selector is not provided for pod affinity or pod anti-affinity one will be created from the pod selector labels.             | `{}`                                       |
| `rule.topologySpreadConstraints`                               | Topology spread constraints for rule pod assignment. If an explicit label selector is not provided one will be created from the pod selector labels.                                         | `[]`                                       |
| `rule.tolerations`                                             | Toleration labels for rule pod assignment.                                                                                                                                                   | `[]`                                       |
| `rule.configReloader.enabled`                                  | If `true`, add the _config-reloader_ container to the pod to watch the config maps.                                                                                                          | `true`                                     |
| `rule.configReloader.resources`                                | Resource requests and limits for the _config-reloader_ container in the rule pod.                                                                                                            | `{}`                                       |
| `rule.alertmanagersConfig.create`                              | If `true`, create a secret containing the content of `rule.alertmanagersConfig.value`.                                                                                                       | `true`                                     |
| `rule.alertmanagersConfig.name`                                | Name of an existing secret to use for the rule alertmanagers configuration, this will also override the default secret name if set with `rule.alertmanagersConfig.create: true`.             | `""`                                       |
| `rule.alertmanagersConfig.key`                                 | Secret key to use for the rule alertmanagers configuration.                                                                                                                                  | `config`                                   |
| `rule.alertmanagersConfig.value`                               | Empty rule alertmanagers configuration.                                                                                                                                                      | _see values.yaml_                          |
| `rule.rules.create`                                            | If `true`, create a config map containing the content of `rule.rules.value`.                                                                                                                 | `true`                                     |
| `rule.rules.name`                                              | Name of an existing config map to use for the rule rules, this will also override the default config map name if set with `rule.rules.create: true`.                                         | `""`                                       |
| `rule.rules.value`                                             | Empty rule alertmanagers configuration.                                                                                                                                                      | _see values.yaml_                          |
| `storeGateway.serviceAccount.create`                           | If `true`, create a new service account for the store gateway pod.                                                                                                                           | `true`                                     |
| `storeGateway.serviceAccount.labels`                           | Labels to add to the store gateway service account.                                                                                                                                          | `{}`                                       |
| `storeGateway.serviceAccount.annotations`                      | Annotations to add to the store gateway service account.                                                                                                                                     | `{}`                                       |
| `storeGateway.serviceAccount.name`                             | Service account to be used for store gateway pod. If not set and `storeGateway.serviceAccount.create` is `true`, a name is generated using the full name template.                           | `""`                                       |
| `storeGateway.serviceAccount.automountToken`                   | If `true`, mount the store gateway ServiceAccount token.                                                                                                                                     | `false`                                    |
| `storeGateway.service.annotations`                             | Annotations to add to the store gateway service.                                                                                                                                             | `{}`                                       |
| `storeGateway.replicas`                                        | The number of replicas of the store gateway pod.                                                                                                                                             | `1`                                        |
| `storeGateway.updateStrategy`                                  | Update strategy for the store gateway pod.                                                                                                                                                   | `{}`                                       |
| `storeGateway.podDisruptionBudget.enabled`                     | If `true`, create a PDB for the store gateway deployment.                                                                                                                                    | `{}`                                       |
| `storeGateway.podDisruptionBudget.minAvailable`                | Set the store gateway PDB minimum available pods.                                                                                                                                            | `null`                                     |
| `storeGateway.podDisruptionBudget.maxUnavailable`              | Set the store gateway PDB maximum unavailable pods.                                                                                                                                          | `null`                                     |
| `storeGateway.podLabels`                                       | Labels to add to the store gateway pod.                                                                                                                                                      | `{}`                                       |
| `storeGateway.podAnnotations`                                  | Annotations to add to the store gateway pod.                                                                                                                                                 | `{}`                                       |
| `storeGateway.podSecurityContext`                              | Security context for the store gateway pod.                                                                                                                                                  | `{fsGroup: 65534, runAsUser: 65534}`       |
| `storeGateway.securityContext`                                 | Security context for the _thanos-store-gateway_ container in the store gateway pod.                                                                                                          | `{}`                                       |
| `storeGateway.priorityClassName`                               | Priority class name to use for the store gateway pod.                                                                                                                                        | `""`                                       |
| `storeGateway.terminationGracePeriodSeconds`                   | Termination grace period for the store gateway pod.                                                                                                                                          | `null`                                     |
| `storeGateway.extraEnv`                                        | Extra environment variables for the _thanos-store-gateway_ container in the store gateway pod.                                                                                               | `[]`                                       |
| `storeGateway.extraArgs`                                       | Extra arguments for the _thanos-store-gateway_ container in the store gateway pod.                                                                                                           | `[]`                                       |
| `storeGateway.livenessProbe`                                   | Liveness probe for the store gateway pod.                                                                                                                                                    | See _values.yaml_                          |
| `storeGateway.readinessProbe`                                  | Readiness probe for the store gateway pod.                                                                                                                                                   | See _values.yaml_                          |
| `storeGateway.resources`                                       | Resource requests and limits for the _thanos-store-gateway_ container in the store gateway pod.                                                                                              | `{}`                                       |
| `storeGateway.persistence.enabled`                             | If `true`, create a PVC for the store gateway pod.                                                                                                                                           | `false`                                    |
| `storeGateway.persistence.existingClaim`                       | Use an existing PVC to persist data for the store gateway pod.                                                                                                                               | `""`                                       |
| `storeGateway.persistence.annotations`                         | Annotations to add to the store gateway PVC.                                                                                                                                                 | `{}`                                       |
| `storeGateway.persistence.accessMode`                          | Persistence access mode for the store gateway PVC.                                                                                                                                           | `ReadWriteOnce`                            |
| `storeGateway.persistence.storageClass`                        | Storage class for the store gateway PVC.                                                                                                                                                     | `standard` _(use `-` for cluster default)_ |
| `storeGateway.persistence.size`                                | Size of the store gateway PVC.                                                                                                                                                               | `8Gi`                                      |
| `storeGateway.nodeSelector`                                    | Node labels for store gateway pod assignment.                                                                                                                                                | `{}`                                       |
| `storeGateway.affinity`                                        | Affinity settings for store gateway pod assignment. If an explicit label selector is not provided for pod affinity or pod anti-affinity one will be created from the pod selector labels.    | `{}`                                       |
| `storeGateway.topologySpreadConstraints`                       | Topology spread constraints for store gateway pod assignment. If an explicit label selector is not provided one will be created from the pod selector labels.                                | `[]`                                       |
| `storeGateway.tolerations`                                     | Toleration labels for store gateway pod assignment.                                                                                                                                          | `[]`                                       |
